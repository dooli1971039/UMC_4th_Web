# Chapter 9. Restful, Token, Login

# 📝 학습 목표

---

1. JWT를 활용하여 로그인 기능을 구현하고 유저 상태관리를 할 수 있다.

# 🎯 핵심 키워드

---

<aside>
💡 주요 내용들에 대해 조사해보고, 자신만의 생각을 통해 정리해보세요!
레퍼런스를 참고하여 정의, 속성, 장단점 등을 적어주셔도 됩니다.
조사는 공식 홈페이지 **Best**, 블로그(최신 날짜) **Not Bad**

</aside>

## REST API

- REST(representational state transfer) : 설계 철학
- REST 방식으로 설계한 API
- URL에서 동사를 제외하고, HTTP의 메서드(GET, POST, PUT, DELETE)를 사용하여 나타냄
=> URL 1개로 조회, 생성, 수정, 삭제가 모두 가능하다+) GET 방식에서는 쿼리를 도입하여 추가 정보를 전할 수도 있다

## URI

Uniform Resource Locator - 자원의 위치뿐만 아니라 자원에 대한 고유 식별자

> Uniform : 리소스를 식별하는 통일된 방식
Resource : 자원, URI로 식별할 수 있는 모든 것여기서 자원은 웹 브라우저의 파일만 뜻하는 게 아니라, 실시간 교통정보 등 우리가 구분할 수 있는 것은 모든 게 리소스가 된다.
Identifier : 다른 항목과 구분하는데 필요한 정보
> 

URI의 하위 개념으로 URL과 URN이 있다.

### URI rule

1. 소문자를 사용한다.
2. 언더바 대신 하이픈을 사용한다.
3. 마지막에 슬래시를 포함하지 않는다.
4. 행위를 포함하지 않는다. (행위는 method를 사용하여 전달한다.)
5. 파일 확장자는 URL에 포함시키지 않는다.
6. 전달하고자 하는 명사를 사용하되, 컨트롤 자원을 의미하는 경우 예외적으로 동사를 사용한다.
7. URI에 작성되는 영어를 복수형으로 작성한다.

[RESTful API 의미와 설계 규칙](https://cocoon1787.tistory.com/540)

## URL

Uniform Resource Locator - 자원이 실재 존재하는 위치를 가리킴

웹사이트 주소로 알고있지만, 컴퓨터 네트워크상의 자원을 모두 나타낸다.

+) 해당 주소로 접속하려면 URL에 맞는 프로토콜(http, sftp,smp..) 을 알고, 그와 동일한 프로토콜로 접속해야 한다.

## Domain

### 도메인 시스템

- 인터넷에 연결된 웹 사이트는 IP 주소로 찾을 수 있다
- IP 주소는 외우기 힘들기 때문에, 이름(도메인)을 붙여서 외우기 쉽도록 함
- 도메인 시스템 == 일종의 전화번호부
- google.com을 입력 => 브라우저가 도메인 시스템에서 google.com에 해당하는 IP 주소를 찾음 => 해당 IP 주소로 이동

### 레지스트리 (registry)

- 도메인의 개수가 너무 많기 때문에, registry가 존재함 (좀 더 쉽게 찾으려고) 
ex) .com, .co.kr, .tv 등이 존재한다
- registry 회사는 도메인을 입력하면 IP 주소로 빠르게 연결할 수 있어야하고, 보안 요소도 구축해야 한다.
- **registry를 관리하는 회사는 도메인을 만드는 역활**을 할 뿐, 팔지는 않는다.
    - 리셀러 존재
    => 도메인을 레지스트리에 등록하는 과정이 복잡하기 때문이다. (회원 관리, 결제, 도메인 관리)
- 레지스트리를 운영하려면 ICANN에 신청하고, 자격을 증명해야 하며, 엄청난 돈과 인프라가 필요하다.
    - ICANN : Internet Corporation for Assigned Names and Numbers (국제 인터넷 주소 관리 기구)

## sub domain

서브 도메인은 보조 도메인으로써, URL로 전송하거나 계정 내의 IP 주소나 디렉토리로 포워딩되는 도메인 이름의 확장자이다. 예를 들어 네이버는 여러 서비스들을 아래와 같은 서브도메인을 통해 사용자가 접근할 수 있도록 한다.

- 네이버 블로그 : **blog**.naver.com
- 네이버 메일 : **mail**.naver.com
- 네이버 금융 : **finance**.naver.com

[서브도메인(subDomain)과 하위패스(subPath) 중 어떤 것이 SEO에 좋을까?  | 수줍은 동그래 블로그](https://shylog.com/seo-subdomain-vs-subfolders/)

## Cookie

- 어떤 웹 사이트를 방문했을 때, 브라우저를 통해 우리의 **컴퓨터에 보관하는 기록물**을 말함
- 쿠키를 활용하여 우리가 어떤 사이트를 방문했는지, 관심사가 무엇인지, 인터넷에서 무엇을 했는지를 관찰함
- HTTP의 stateless한 단점을 보완하기 위한 쿠키는, 편의, 보안등의 이유로 몇 가지 규칙을 따라야 한다.
    - 쿠키는 도메인 1개에만 한정한다.
        - ex) 페이스북에서 생성된 쿠키는 넷플릭스에 보낼 수 없다. (당연한 것)
        - but, 도메인과 상관 없는 쿠키도 있다.
            - ex) 네이버 블로그 글에, 페이스북 '좋아요' 버튼이 있는 경우 페이스북에서 그 글과 관련된 쿠키를 얻을 수 있다.
    - 쿠키는 자동으로 보낸다.
        - 쿠키는 우리가 원하든 원하지 않든 우리의 컴퓨터와 서버를 왔다 갔다 한다.
        - 따로 "쿠키를 보내시겠습니까?"하는 메시지를 보내지 않음
    - 쿠키는 컴퓨터에 자동으로 저장된다.
- 쿠키의 활용 예시: 브라우저를 껐는데도 로그인이 유지되는 경우

## Session

일정 시간 동안 같은 사용자(브라우저)로부터 들어오는 일련의 요구를 하나의 상태로 보고, 그 상태를 일정하게 유지시키는 기술이다. 여기서 일정 시간은 방문자가 웹 브라우저를 통해 웹 서버에 접속한 시점으로부터 웹 브라우저를 종료하여 연결을 끝내는 시점을 말한다.

즉, 방분자가 웹 서버에 접속해 있는 상태를 하나의 단위로 보고 그것을 세션이라고 한다.

![Untitled](Chapter%209%20Restful,%20Token,%20Login%20f9dac533199745f4ab1eb1c6508f10e4/Untitled.png)

![Untitled](Chapter%209%20Restful,%20Token,%20Login%20f9dac533199745f4ab1eb1c6508f10e4/Untitled%201.png)

[쿠키(Cookie), 세션(Session) 특징 및 차이](https://hahahoho5915.tistory.com/32)

## OAuth

제3자 인증방식

기본적으로 사용자는 서버를 신뢰할 수 없고, 서버 역시 사용자의 민감한 정보를 관리하는 것은 리소스가 필요함.

그래서 OAuth를 사용해서 신뢰할 수 있는 서버에게 정보를 맡겨놓고 접근할 수 있는 권한을 주는 것

쉽게 말해서, 고객이 안전하게 다른 서비스의 정보를 우리 서비스에 건네주기 위한 방법임.

고객이 자신의 네이버 아이디/비밀번호를 우리 서비스에 알려주지 않아도, 네이버에 있는 고객의 정보를 우리 서비스에서 안전하게 사용하기 위한 방법임

[[Backend] JWT와 OAuth의 관계](https://jeonyoungho.github.io/posts/JWT와-OAuth의-관계/)

## JWT

Json Web Token의 약자로, 모바일이나 웹의 사용자 인증을 위해 사용하는 암호화된 토큰을 의미. JWT 정보를 리퀘스트에 담아서 사용자의 정보 열람, 수정 등 개인적인 작업 등을 수행할 수 있게 함

✔️ 애플리케이션이 실행될 때 JWT를 static 변수와 로컬 스토리지에 저장하게 됨.

static 변수에 저장하는 이유 ? HTTP 통신을 할 때마다 JWT를 HTTP 헤더에 담아서 보내야 하는데, 이를 로컬 스토리지에서 계속 불러오면 오버헤드가 발생하기 때문임.

[JWT, OAuth](https://velog.io/@dewgang/JWT-OAuth)

## Local Storage

localStorage를 사용하면, 브라우저에 key-value 값을 Storage에 저장할 수 있다. 저장한 데이터는 세션간에 공유되어, 세션이 바뀌어도 저장한 데이터가 유지된다.

[[Javascript] localStorage 사용법 (읽기, 쓰기, 삭제, 키목록 등)](https://hianna.tistory.com/697)

# 📢 학습 후기

---

- 이번 주차 워크북을 해결해보면서 어땠는지 회고해봅시다.
- 핵심 키워드에 대해 완벽하게 이해했는지? 혹시 이해가 안 되는 부분은 뭐였는지?

# ✅ 실습 체크리스트

---

- [x]  Cookie, Session, OAuth, JWT의 장단점을 파악하고 본인은 어떤 기술이 가장 적합할 것 같은지 스터디에서 공유하기.
- [x]  [jwt 실습 사이트](http://jwt.io)에서 어떤 형식으로 JWT가 구성되는지 알아보기

# ☑️ 실습 인증 파트

---

- Cookie, Session, OAuth, JWT의 장단점을 파악하고 본인은 어떤 기술이 가장 적합할 것 같은지 스터디에서 공유하기.
- [jwt 실습 사이트](http://jwt.io)에서 어떤 형식으로 JWT가 구성되는지 알아보기

# 🔥 미션

---

1. JWT를 활용하여 자동 로그인 기능을 구현해보세요.
    1. Local Storage라는 개념이 필요할 수 있습니다.
2. 이전 미션들을 완수하지 못한 분들은 모든 미션을 클리어할 수 있도록 해주세요!

# ⚡ 트러블 슈팅

---

<aside>
💡 실습하면서 생긴 문제들에 대해서, **이슈 - 문제 - 해결** 순서로 작성해주세요.

</aside>

<aside>
💡 스스로 해결하기 어렵다면? 스터디원들에게 도움을 요청하거나 **너디너리의 지식IN 채널에 질문**해보세요!

</aside>

- ⚡이슈 No.1 (예시, 서식만 복사하시고 지워주세요.)
    
    **`이슈`**
    
    👉 앱 실행 중에 노래 다음 버튼을 누르니까 앱이 종료되었다.
    
    **`문제`**
    
    👉 노래클래스의 데이터리스트의 Size를 넘어서 NullPointException이 발생하여 앱이 종료된 것이었다. 
    
    **`해결`**
    
    👉  노래 다음 버튼을 눌렀을 때 데이터리스트의 Size를 검사해 Size보다 넘어가려고 하면 다음으로 넘어가는 메서드를 실행시키지 않고, 첫 노래로 돌아가게끔 해결
    
    **`참고레퍼런스`**
    
    - 링크

# 🤔 이것도 한 번 생각해봐요!

---

- JWT를 활용했을 때 우려되는 사항은 없었나요?
- 디자인을 보고 스타일링을 하는데 귀찮진 않았나요? 귀찮음을 해결할 수 있는 방법엔 어떤게 있을까요?

# 🤔 참고 자료

---

[https://www.youtube.com/watch?v=7abbNwuCXbg](https://www.youtube.com/watch?v=7abbNwuCXbg)

[REST API 제대로 알고 사용하기 : NHN Cloud Meetup](https://meetup.nhncloud.com/posts/92)